# é€šä¹‰ä¸‡ç›¸ MCP æœåŠ¡å™¨

ä¸€ä¸ªé«˜æ€§èƒ½ã€æ¨¡å—åŒ–çš„ [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) é€šä¹‰ä¸‡ç›¸æ–‡ç”Ÿå›¾æœåŠ¡å™¨ï¼Œæä¾›ä¼ä¸šçº§çš„AIå›¾åƒç”Ÿæˆå’Œæ™ºèƒ½æç¤ºè¯ä¼˜åŒ–åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¨ å¼ºå¤§çš„å›¾åƒç”Ÿæˆèƒ½åŠ›
- **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒ wanx2.1-t2i-turboã€wanx2.1-t2i-plusã€wanx2.0-t2i-turbo
- **ä¸­è‹±æ–‡æç¤ºè¯**: å®Œå…¨æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æè¿°ï¼Œæ™ºèƒ½æç¤ºè¯æ‰©å±•
- **çµæ´»å‚æ•°æ§åˆ¶**: è‡ªå®šä¹‰å›¾åƒå°ºå¯¸ã€æ•°é‡ã€ç§å­å€¼ã€è´Ÿå‘æç¤ºè¯ç­‰
- **å¼‚æ­¥ä»»åŠ¡å¤„ç†**: æ”¯æŒé•¿æ—¶é—´ä»»åŠ¡çš„çŠ¶æ€æŸ¥è¯¢å’Œç®¡ç†
- **æ‰¹é‡ç”Ÿæˆ**: ä¸€æ¬¡å¯ç”Ÿæˆ1-4å¼ å›¾ç‰‡

### ğŸ§  æ™ºèƒ½æç¤ºè¯ç³»ç»Ÿ
- **è‡ªåŠ¨ä¼˜åŒ–**: å°†ç®€å•æè¿°è½¬æ¢ä¸ºä¸“ä¸šçº§æç¤ºè¯
- **é£æ ¼åº“**: åŒ…å«20+ç§è‰ºæœ¯é£æ ¼ï¼ˆ3Då¡é€šã€æ°´å½©ã€å†™å®ã€å›½é£æ°´å¢¨ç­‰ï¼‰
- **ç»“æ„åŒ–æŒ‡å—**: æ¶µç›–ä¸»ä½“ã€åœºæ™¯ã€é£æ ¼ã€é•œå¤´ã€å…‰çº¿ç­‰å„ä¸ªæ–¹é¢
- **ä¸°å¯Œç¤ºä¾‹**: æä¾›å¤§é‡å®ç”¨çš„æç¤ºè¯æ¨¡æ¿å’Œæœ€ä½³å®è·µ

### ğŸ—ï¸ ä¼ä¸šçº§æ¶æ„è®¾è®¡
- **æ¨¡å—åŒ–è®¾è®¡**: 7ä¸ªä¸“é—¨æ¨¡å—ï¼ŒèŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- **å¹¶å‘æ§åˆ¶**: æ™ºèƒ½è¯·æ±‚é˜Ÿåˆ—ï¼Œé˜²æ­¢APIé™åˆ¶ï¼Œæ”¯æŒæœ€å¤§2ä¸ªå¹¶å‘è¯·æ±‚
- **é”™è¯¯æ¢å¤**: æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶ï¼Œè‡ªåŠ¨å¤„ç†ä¸´æ—¶æ•…éšœ
- **æ€§èƒ½ç›‘æ§**: è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡å’ŒAPIè°ƒç”¨ç»Ÿè®¡
- **ä¼˜é›…å…³é—­**: å®Œå–„çš„èµ„æºæ¸…ç†å’ŒæœåŠ¡å…³é—­æµç¨‹

### ğŸ’¾ æ™ºèƒ½å­˜å‚¨ç®¡ç†
- **æœ¬åœ°å›¾ç‰‡å­˜å‚¨**: è‡ªåŠ¨ä¸‹è½½å¹¶æœ¬åœ°ä¿å­˜ç”Ÿæˆçš„å›¾ç‰‡
- **å…ƒæ•°æ®æŒä¹…åŒ–**: JSONæ ¼å¼å­˜å‚¨å›¾ç‰‡ä¿¡æ¯ï¼Œæ”¯æŒæœç´¢å’Œç»Ÿè®¡
- **è‡ªåŠ¨æ¸…ç†**: 7å¤©åè‡ªåŠ¨æ¸…ç†è¿‡æœŸå›¾ç‰‡ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´
- **å­˜å‚¨ç»Ÿè®¡**: å®æ—¶æ˜¾ç¤ºå­˜å‚¨ä½¿ç”¨æƒ…å†µå’Œæ¨¡å‹åˆ†å¸ƒ

### ğŸ›¡ï¸ å¯é æ€§ä¿éšœ
- **æµ‹è¯•æ¨¡å¼**: æ— éœ€APIå¯†é’¥å³å¯æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **é…ç½®éªŒè¯**: å¯åŠ¨æ—¶è‡ªåŠ¨éªŒè¯é…ç½®æœ‰æ•ˆæ€§
- **è¯¦ç»†æ—¥å¿—**: åˆ†çº§æ—¥å¿—ç³»ç»Ÿï¼Œä¾¿äºé—®é¢˜è¯Šæ–­

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚
- Node.js >= 18
- npm æˆ– yarn
- é€šä¹‰ä¸‡ç›¸ API å¯†é’¥ï¼ˆå¯é€‰ï¼Œæµ‹è¯•æ¨¡å¼æ— éœ€å¯†é’¥ï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/jesxion/tongyi-wanx-mcp.git
cd tongyi-wanx-mcp
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

#### å¿…éœ€çš„ç¯å¢ƒå˜é‡

**å›¾ç‰‡å­˜å‚¨ç›®å½•ï¼ˆå¿…éœ€ï¼‰:**
```powershell
# Windows (PowerShell)
$env:IMAGES_DIR="C:\path\to\your\images\directory"

# Linux/Mac
export IMAGES_DIR="/path/to/your/images/directory"
```

#### å¯é€‰çš„ç¯å¢ƒå˜é‡

**APIå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰:**
å¦‚æœè¦ä½¿ç”¨çœŸå®çš„å›¾åƒç”ŸæˆåŠŸèƒ½ï¼Œéœ€è¦é…ç½®APIå¯†é’¥ï¼š

1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°](https://bailian.console.aliyun.com/)
2. åˆ›å»ºåº”ç”¨å¹¶è·å– API Key
3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

**Windows (PowerShell):**
```powershell
$env:DASHSCOPE_API_KEY="your-api-key-here"
```

**Linux/Mac:**
```bash
export DASHSCOPE_API_KEY="your-api-key-here"
```

**æˆ–è€…åˆ›å»º `.env` æ–‡ä»¶:**
```env
IMAGES_DIR=./your-images-directory
DASHSCOPE_API_KEY=your-api-key-here
```

### 4. ç¼–è¯‘å’Œè¿è¡Œ

```bash
# ç¼–è¯‘TypeScript
npm run build

# å¯åŠ¨æœåŠ¡å™¨
npm start

# æˆ–è€…å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
npm run dev
```

### 5. éªŒè¯å®‰è£…

```bash
# è¿è¡Œæµ‹è¯•ï¼ˆæµ‹è¯•æ¨¡å¼ï¼Œæ— éœ€APIå¯†é’¥ï¼‰
npm test
```

å¦‚æœçœ‹åˆ° "ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆï¼" è¯´æ˜å®‰è£…æˆåŠŸã€‚

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
tongyi-wanx-mcp/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ index.ts           # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â”œâ”€â”€ config.ts          # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ logger.ts          # æ—¥å¿—ç³»ç»Ÿæ¨¡å—
â”‚   â”œâ”€â”€ errors.ts          # é”™è¯¯å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ concurrency.ts     # å¹¶å‘æ§åˆ¶æ¨¡å—
â”‚   â”œâ”€â”€ image-storage.ts   # å›¾ç‰‡å­˜å‚¨æ¨¡å—
â”‚   â””â”€â”€ tongyi-service.ts  # é€šä¹‰ä¸‡ç›¸æœåŠ¡æ¨¡å—
â”œâ”€â”€ dist/                  # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ generated_images/      # ç”Ÿæˆå›¾ç‰‡å­˜å‚¨ç›®å½•
â”œâ”€â”€ test_images/          # æµ‹è¯•å›¾ç‰‡å­˜å‚¨ç›®å½•
â”œâ”€â”€ OPTIMIZATION.md        # ä¼˜åŒ–æ–‡æ¡£
â”œâ”€â”€ CLEANUP-SUMMARY.md     # æ¸…ç†æ€»ç»“
â”œâ”€â”€ test.js               # æµ‹è¯•è„šæœ¬
â””â”€â”€ package.json          # é¡¹ç›®é…ç½®

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### æ ¸å¿ƒç”Ÿæˆå·¥å…·

#### text_to_image
ç”ŸæˆAIå›¾åƒçš„æ ¸å¿ƒå·¥å…·ï¼Œæ”¯æŒå¤šç§å‚æ•°è‡ªå®šä¹‰ã€‚

**å‚æ•°ï¼š**
- `prompt` (å¿…éœ€): å›¾åƒæè¿°ï¼Œæœ€é•¿800å­—ç¬¦
- `model`: æ¨¡å‹é€‰æ‹©ï¼Œå¯é€‰å€¼ï¼š
  - `wanx2.1-t2i-turbo` (é»˜è®¤) - é€Ÿåº¦å¿«ï¼Œé€‚åˆå¿«é€ŸåŸå‹
  - `wanx2.1-t2i-plus` - ç»†èŠ‚ä¸°å¯Œï¼Œé€‚åˆé«˜è´¨é‡è¾“å‡º
  - `wanx2.0-t2i-turbo` - æ€§ä»·æ¯”é«˜ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨
- `negative_prompt`: è´Ÿå‘æç¤ºè¯ï¼Œæœ€é•¿500å­—ç¬¦
- `size`: å›¾åƒå°ºå¯¸ï¼Œæ ¼å¼ä¸º å®½*é«˜ (é»˜è®¤: 1024*1024)
  - æ”¯æŒèŒƒå›´ï¼š512-1440åƒç´ 
  - å¸¸ç”¨å°ºå¯¸ï¼š1024*1024ã€1024*576ã€576*1024
- `n`: ç”Ÿæˆæ•°é‡ 1-4 (é»˜è®¤: 1)
- `seed`: éšæœºç§å­ï¼Œç”¨äºæ§åˆ¶ç”Ÿæˆçš„éšæœºæ€§ (å¯é€‰)
- `prompt_extend`: æ™ºèƒ½æç¤ºè¯æ‰©å±• (é»˜è®¤: true)
- `watermark`: æ·»åŠ AIæ°´å° (é»˜è®¤: false)
- `wait_for_completion`: ç­‰å¾…å®Œæˆ (é»˜è®¤: true)

**ç¤ºä¾‹ï¼š**
```json
{
  "model": "wanx2.1-t2i-plus",
  "prompt": "ä¸€åªå¯çˆ±çš„æ©˜çŒ«ï¼Œååœ¨çª—å°ä¸Šï¼Œé˜³å…‰æ´’åœ¨æ¯›å‘ä¸Šï¼Œæ¸©æš–çš„è‰²è°ƒï¼Œæ—¥ç³»æ‘„å½±é£æ ¼ï¼Œé«˜è´¨é‡ï¼Œ4Kï¼Œç²¾ç»†ç»†èŠ‚",
  "negative_prompt": "æ¨¡ç³Šï¼Œä½è´¨é‡ï¼Œå˜å½¢",
  "size": "1024*1024",
  "n": 2,
  "prompt_extend": true,
  "watermark": false
}
```

### ä»»åŠ¡ç®¡ç†å·¥å…·

#### query_task
æŸ¥è¯¢å›¾åƒç”Ÿæˆä»»åŠ¡çŠ¶æ€å’Œç»“æœã€‚

**å‚æ•°ï¼š**
- `task_id` (å¿…éœ€): ä»»åŠ¡ID

**è¿”å›çŠ¶æ€ï¼š**
- `PENDING`: ä»»åŠ¡æ’é˜Ÿä¸­
- `RUNNING`: ä»»åŠ¡æ‰§è¡Œä¸­
- `SUCCEEDED`: ä»»åŠ¡å®Œæˆ
- `FAILED`: ä»»åŠ¡å¤±è´¥

#### get_supported_models
è·å–æ‰€æœ‰æ”¯æŒçš„æ¨¡å‹åˆ—è¡¨åŠè¯¦ç»†è¯´æ˜ã€‚

### æœåŠ¡ç›‘æ§å·¥å…·

#### get_service_status
è·å–æœåŠ¡çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- æµ‹è¯•æ¨¡å¼çŠ¶æ€
- APIå¯†é’¥é…ç½®çŠ¶æ€
- å¹¶å‘è¯·æ±‚æƒ…å†µ
- å›¾ç‰‡å­˜å‚¨ç»Ÿè®¡

#### get_image_stats
è·å–è¯¦ç»†çš„å›¾ç‰‡å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯ï¼š
- æ€»å›¾ç‰‡æ•°é‡
- å­˜å‚¨ç©ºé—´ä½¿ç”¨
- å„æ¨¡å‹ä½¿ç”¨åˆ†å¸ƒ
- åˆ›å»ºæ—¶é—´ç»Ÿè®¡

#### search_images
æœç´¢æœ¬åœ°å­˜å‚¨çš„å›¾ç‰‡ã€‚

**å‚æ•°ï¼š**
- `query` (å¿…éœ€): æœç´¢å…³é”®è¯ï¼Œå¯åŒ¹é…æç¤ºè¯æˆ–æ¨¡å‹åç§°

## ğŸ’¡ æ™ºèƒ½æç¤ºè¯åŠŸèƒ½

æœ¬é¡¹ç›®å†…ç½®äº†å¼ºå¤§çš„æç¤ºè¯ä¼˜åŒ–ç³»ç»Ÿï¼Œé€šè¿‡MCPçš„PromptsåŠŸèƒ½æä¾›æ™ºèƒ½æç¤ºè¯å¤„ç†ã€‚

### å¯ç”¨çš„æç¤ºè¯æ¨¡æ¿

#### optimize-prompt
å°†ç®€å•æè¿°ä¼˜åŒ–ä¸ºä¸“ä¸šçº§æç¤ºè¯ã€‚

**å‚æ•°ï¼š**
- `description` (å¿…éœ€): ç®€å•çš„å›¾åƒæè¿°
- `style` (å¯é€‰): é£æ ¼ç±»å‹
  - `3Då¡é€š`ã€`åºŸåœŸé£`ã€`ç‚¹å½©ç”»`ã€`è¶…ç°å®`
  - `æ°´å½©`ã€`ç²˜åœŸ`ã€`å†™å®`ã€`é™¶ç“·`
  - `3D`ã€`æ°´å¢¨`ã€`æŠ˜çº¸`ã€`å·¥ç¬”`ã€`å›½é£æ°´å¢¨`
- `shot_type` (å¯é€‰): æ™¯åˆ«ç±»å‹
  - `ç‰¹å†™`ã€`è¿‘æ™¯`ã€`ä¸­æ™¯`ã€`è¿œæ™¯`ã€`é¸Ÿç°`

**ç¤ºä¾‹ï¼š**
```
è¾“å…¥: "ä¸€åªçŒ«"
ä¼˜åŒ–å: "ä¸€åªå¯çˆ±çš„æ©˜çŒ«ï¼Œæ¯›å‘è“¬æ¾ï¼Œç»¿è‰²çœ¼ç›ï¼Œ3Då¡é€šé£æ ¼ï¼Œç‰¹å†™é•œå¤´ï¼Œé«˜è´¨é‡æ¸²æŸ“ï¼Œç²¾ç»†ç»†èŠ‚ï¼Œä¸“ä¸šæ‘„å½±ï¼Œ4Kåˆ†è¾¨ç‡"
```

#### prompt-guide-[type]
è·å–è¯¦ç»†çš„æç¤ºè¯å†™ä½œæŒ‡å—ï¼Œæ”¯æŒå¤šç§ç±»å‹ï¼š

- `prompt-guide-basic`: åŸºç¡€æç¤ºè¯å…¬å¼å’Œå…¥é—¨æŒ‡å—
- `prompt-guide-advanced`: è¿›é˜¶æç¤ºè¯æŠ€å·§
- `prompt-guide-styles`: 20+ç§è‰ºæœ¯é£æ ¼å‚è€ƒ
- `prompt-guide-shot-types`: æ™¯åˆ«å’Œæ„å›¾æŒ‡å—
- `prompt-guide-perspectives`: è§†è§’å’Œè§’åº¦å‚è€ƒ
- `prompt-guide-lens-types`: é•œå¤´ç±»å‹å’Œæ•ˆæœ
- `prompt-guide-lighting`: å…‰çº¿å’Œæ°›å›´è®¾ç½®

#### style-examples-[style]
è·å–ç‰¹å®šé£æ ¼çš„ç¤ºä¾‹æç¤ºè¯ï¼Œæ”¯æŒæ‰€æœ‰å†…ç½®é£æ ¼ï¼š

```
style-examples-3d-cartoon    # 3Då¡é€šé£æ ¼ç¤ºä¾‹
style-examples-watercolor    # æ°´å½©é£æ ¼ç¤ºä¾‹
style-examples-realistic     # å†™å®é£æ ¼ç¤ºä¾‹
style-examples-chinese-ink   # å›½é£æ°´å¢¨é£æ ¼ç¤ºä¾‹
... ç­‰ç­‰
```

### ä½¿ç”¨æ–¹æ³•

é€šè¿‡MCPå®¢æˆ·ç«¯è°ƒç”¨æç¤ºè¯åŠŸèƒ½ï¼š

```json
{
  "method": "prompts/get",
  "params": {
    "name": "optimize-prompt",
    "arguments": {
      "description": "å¤•é˜³ä¸‹çš„åŸå¸‚",
      "style": "åºŸåœŸé£", 
      "shot_type": "è¿œæ™¯"
    }
  }
}
```

## ğŸ“š æç¤ºè¯å†™ä½œæŒ‡å—

### åŸºç¡€å…¬å¼
```
ä¸»ä½“ + åœºæ™¯ + é£æ ¼
```

**ç¤ºä¾‹ï¼š**
"25å²ä¸­å›½å¥³å­©ï¼Œåœ†è„¸ï¼Œçœ‹ç€é•œå¤´ï¼Œä¼˜é›…çš„æ°‘æ—æœè£…ï¼Œå•†ä¸šæ‘„å½±ï¼Œå®¤å¤–ï¼Œç”µå½±çº§å…‰ç…§ï¼ŒåŠèº«ç‰¹å†™ï¼Œç²¾è‡´çš„æ·¡å¦†ï¼Œé”åˆ©çš„è¾¹ç¼˜ã€‚"

### è¿›é˜¶å…¬å¼
```
ä¸»ä½“ï¼ˆä¸»ä½“æè¿°ï¼‰+ åœºæ™¯ï¼ˆåœºæ™¯æè¿°ï¼‰+ é£æ ¼ï¼ˆå®šä¹‰é£æ ¼ï¼‰+ é•œå¤´è¯­è¨€ + æ°›å›´è¯ + ç»†èŠ‚ä¿®é¥°
```

### é£æ ¼åˆ†ç±»

#### è‰ºæœ¯é£æ ¼
- **3Då¡é€š**: ç«‹ä½“æ„Ÿå¼ºï¼Œè‰²å½©é²œè‰³ï¼Œé€‚åˆå¯çˆ±é£æ ¼
- **æ°´å½©**: æŸ”å’Œæ¸å˜ï¼Œæ¢¦å¹»æ•ˆæœï¼Œè‰ºæœ¯æ„Ÿå¼º
- **å†™å®**: ç»†èŠ‚ä¸°å¯Œï¼Œé€¼çœŸè´¨æ„Ÿï¼Œå•†ä¸šæ‘„å½±
- **å›½é£æ°´å¢¨**: ä¼ ç»Ÿç¾å­¦ï¼Œæ„å¢ƒæ·±è¿œï¼Œä¸­å›½é£

#### ç§‘å¹»/å¥‡å¹»é£æ ¼
- **åºŸåœŸé£**: åæœ«æ—¥ç¾å­¦ï¼Œé‡‘å±è´¨æ„Ÿ
- **è¶…ç°å®**: æ¢¦å¢ƒèˆ¬çš„å¥‡å¹»æ•ˆæœ
- **è’¸æ±½æœ‹å…‹**: å¤å¤ç§‘æŠ€ï¼Œæœºæ¢°ç¾å­¦

#### ä¼ ç»Ÿè‰ºæœ¯é£æ ¼
- **å·¥ç¬”ç”»**: ç²¾ç»†çº¿æ¡ï¼Œä¼ ç»ŸæŠ€æ³•
- **æŠ˜çº¸**: å‡ ä½•ç®€çº¦ï¼Œç«‹ä½“æ„Ÿ
- **é™¶ç“·**: å…‰æ»‘è´¨æ„Ÿï¼Œå¤å…¸ç¾

### æ™¯åˆ«ä¸æ„å›¾

#### æ™¯åˆ«ç±»å‹
- **ç‰¹å†™ (Close-up)**: çªå‡ºç»†èŠ‚ï¼Œæƒ…æ„Ÿè¡¨è¾¾ï¼Œ1/3ç”»é¢
- **è¿‘æ™¯ (Medium Close-up)**: åŠèº«äººåƒï¼Œå•†ä¸šæ‘„å½±
- **ä¸­æ™¯ (Medium Shot)**: å…¨èº«å±•ç¤ºï¼Œç¯å¢ƒç»“åˆ
- **è¿œæ™¯ (Long Shot)**: å¹¿é˜”è§†é‡ï¼Œå®è§‚åœºé¢
- **é¸Ÿç° (Bird's Eye View)**: ä¿¯è§†è§’åº¦ï¼Œå…¨å±€è§†è§’

#### æ„å›¾æŠ€å·§
- **ä¸‰åˆ†æ³•**: é»„é‡‘åˆ†å‰²ç‚¹æ„å›¾
- **å¯¹ç§°æ„å›¾**: å¹³è¡¡ç¨³å®šçš„è§†è§‰æ•ˆæœ
- **å¼•å¯¼çº¿**: åˆ©ç”¨çº¿æ¡å¼•å¯¼è§†çº¿
- **æ¡†æ¶æ„å›¾**: åˆ©ç”¨ç¯å¢ƒå…ƒç´ å½¢æˆç”»æ¡†

### å…‰çº¿ä¸æ°›å›´

#### å…‰çº¿æ•ˆæœ
- **è‡ªç„¶å…‰**: æŸ”å’ŒçœŸå®ï¼Œæˆ·å¤–æ‹æ‘„æ„Ÿ
- **é€†å…‰**: è½®å»“åˆ†æ˜ï¼Œæ¢¦å¹»å…‰ç¯æ•ˆæœ
- **ä¾§å…‰**: ç«‹ä½“æ„Ÿå¼ºï¼Œæˆå‰§æ€§å…‰å½±
- **é¡¶å…‰**: å‡åŒ€ç…§æ˜ï¼Œå•†ä¸šæ‘„å½±é£æ ¼
- **æ°›å›´å…‰**: æƒ…æ„Ÿæ¸²æŸ“ï¼Œæ„å¢ƒè¥é€ 

#### æ—¶é—´ä¸ç¯å¢ƒ
- **é»„é‡‘æ—¶åˆ»**: æ—¥å‡ºæ—¥è½ï¼Œæ¸©æš–è‰²è°ƒ
- **è“è°ƒæ—¶åˆ»**: æ—¥è½åï¼Œå†·è‰²è°ƒæ°›å›´
- **å¤œæ™¯**: äººå·¥å…‰æºï¼Œéœ“è™¹ç¯æ•ˆæœ
- **å®¤å†…**: å—æ§å…‰çº¿ï¼Œæ¸©é¦¨æ°›å›´

### è´¨é‡å¢å¼ºå…³é”®è¯

#### ç”»è´¨è¯æ±‡
- `é«˜è´¨é‡`ã€`4K`ã€`8K`ã€`è¶…é«˜æ¸…`
- `ç²¾ç»†ç»†èŠ‚`ã€`é”åˆ©æ¸…æ™°`ã€`ä¸“ä¸šæ‘„å½±`
- `ç”µå½±çº§`ã€`å•†ä¸šæ‘„å½±`ã€`å¤§å¸ˆä½œå“`

#### æŠ€æœ¯è¯æ±‡
- `æ™¯æ·±`ã€`æµ…æ™¯æ·±`ã€`é•¿ç„¦é•œå¤´`
- `HDR`ã€`ä¸“ä¸šæ‰“å…‰`ã€`å·¥ä½œå®¤å…‰çº¿`
- `åæœŸå¤„ç†`ã€`è°ƒè‰²`ã€`ç”µå½±è‰²è°ƒ`

## ğŸ”§ é…ç½®ä¸ç¯å¢ƒ

### ç¯å¢ƒå˜é‡é…ç½®
- `IMAGES_DIR`: å›¾ç‰‡å­˜å‚¨è·¯å¾„ (**å¿…éœ€**, å¿…é¡»åœ¨ MCP host/client ç«¯é…ç½®)
- `DASHSCOPE_API_KEY`: é€šä¹‰ä¸‡ç›¸APIå¯†é’¥ (å¯é€‰ï¼Œæµ‹è¯•æ¨¡å¼æ— éœ€)
- `LOG_LEVEL`: æ—¥å¿—çº§åˆ« (DEBUG, INFO, ERRORï¼Œé»˜è®¤: INFO)
- `MAX_CONCURRENT_REQUESTS`: æœ€å¤§å¹¶å‘è¯·æ±‚æ•° (é»˜è®¤: 2)
- `CLEANUP_INTERVAL_HOURS`: æ¸…ç†é—´éš”å°æ—¶ (é»˜è®¤: 24)
- `IMAGE_RETENTION_DAYS`: å›¾ç‰‡ä¿ç•™å¤©æ•° (é»˜è®¤: 7)

### æ¨¡å‹å¯¹æ¯”

| æ¨¡å‹ | ç‰¹ç‚¹ | é€Ÿåº¦ | è´¨é‡ | é€‚ç”¨åœºæ™¯ |
|------|------|------|------|----------|
| wanx2.1-t2i-turbo | é€Ÿåº¦ä¼˜å…ˆ | â­â­â­ | â­â­ | å¿«é€ŸåŸå‹ã€æ‰¹é‡ç”Ÿæˆ |
| wanx2.1-t2i-plus | è´¨é‡ä¼˜å…ˆ | â­â­ | â­â­â­ | é«˜è´¨é‡è¾“å‡ºã€å•†ä¸šç”¨é€” |
| wanx2.0-t2i-turbo | æ€§ä»·æ¯” | â­â­â­ | â­â­ | æ—¥å¸¸ä½¿ç”¨ã€æˆæœ¬æ§åˆ¶ |

### æ”¯æŒçš„å›¾åƒå°ºå¯¸

| æ¯”ä¾‹ | å°ºå¯¸ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| 1:1 | 1024Ã—1024 | å¤´åƒã€å›¾æ ‡ã€ç¤¾äº¤åª’ä½“ |
| 16:9 | 1024Ã—576 | æ¨ªå±å£çº¸ã€YouTubeç¼©ç•¥å›¾ |
| 9:16 | 576Ã—1024 | æ‰‹æœºå£çº¸ã€Instagram Story |
| 4:3 | 1024Ã—768 | ä¼ ç»Ÿç…§ç‰‡æ¯”ä¾‹ |
| 3:4 | 768Ã—1024 | è‚–åƒç…§ç‰‡ |

### æ€§èƒ½ä¼˜åŒ–é…ç½®

#### å¹¶å‘æ§åˆ¶
- **é»˜è®¤å¹¶å‘æ•°**: 2ä¸ªè¯·æ±‚
- **é˜Ÿåˆ—ç®¡ç†**: è‡ªåŠ¨æ’é˜Ÿç­‰å¾…
- **è¶…æ—¶è®¾ç½®**: 5åˆ†é’Ÿä»»åŠ¡è¶…æ—¶
- **é‡è¯•æœºåˆ¶**: æŒ‡æ•°é€€é¿é‡è¯•

#### å­˜å‚¨ç®¡ç†
- **è‡ªåŠ¨æ¸…ç†**: æ¯24å°æ—¶æ¸…ç†ä¸€æ¬¡
- **å›¾ç‰‡å‹ç¼©**: è‡ªåŠ¨ä¼˜åŒ–å­˜å‚¨ç©ºé—´
- **å…ƒæ•°æ®ç¼“å­˜**: JSONæ ¼å¼å¿«é€Ÿæ£€ç´¢
- **æœç´¢ç´¢å¼•**: æ”¯æŒå…³é”®è¯æœç´¢

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### MCPå®¢æˆ·ç«¯é›†æˆ

#### Claude Desktop é…ç½®
åœ¨ Claude Desktop çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "tongyi-wanx": {
      "command": "node",
      "args": ["C:/path/to/tongyi-wanx-mcp/dist/index.js"],
      "env": {
        "IMAGES_DIR": "C:/path/to/your/images/directory",
        "DASHSCOPE_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

#### åŸºç¡€å›¾åƒç”Ÿæˆ
```json
{
  "method": "tools/call",
  "params": {
    "name": "text_to_image",
    "arguments": {
      "prompt": "ä¸€æœµç››å¼€çš„æ¨±èŠ±ï¼Œç²‰è‰²èŠ±ç“£ï¼Œæ˜¥å¤©çš„å…¬å›­ï¼Œé˜³å…‰é€è¿‡æ ‘å¶ï¼Œæ—¥ç³»æ‘„å½±é£æ ¼ï¼Œæµ…æ™¯æ·±ï¼Œé«˜è´¨é‡ï¼Œ4K",
      "model": "wanx2.1-t2i-plus",
      "size": "1024*1024",
      "negative_prompt": "æ¨¡ç³Šï¼Œä½è´¨é‡ï¼Œå˜å½¢ï¼Œå¤šä½™çš„æ‰‹æŒ‡",
      "n": 2
    }
  }
}
```

#### æ‰¹é‡ç”Ÿæˆä¸åŒé£æ ¼
```json
{
  "method": "tools/call",
  "params": {
    "name": "text_to_image", 
    "arguments": {
      "prompt": "å±±æ°´é£æ™¯ï¼Œå¤å…¸å»ºç­‘ï¼Œä¸­å›½é£ï¼Œå›½ç”»é£æ ¼ï¼Œæ°´å¢¨ç”»ï¼Œæ„å¢ƒæ·±è¿œï¼Œé«˜è´¨é‡",
      "model": "wanx2.1-t2i-plus",
      "size": "1024*576",
      "n": 4,
      "seed": 12345
    }
  }
}
```

### æç¤ºè¯ä¼˜åŒ–ç¤ºä¾‹

#### ä¼˜åŒ–ç®€å•æè¿°
```json
{
  "method": "prompts/get",
  "params": {
    "name": "optimize-prompt",
    "arguments": {
      "description": "å¤•é˜³ä¸‹çš„åŸå¸‚",
      "style": "å†™å®",
      "shot_type": "è¿œæ™¯"
    }
  }
}
```

**ä¼˜åŒ–ç»“æœï¼š**
"ç°ä»£åŒ–åŸå¸‚å¤©é™…çº¿ï¼Œå¤•é˜³è¥¿ä¸‹ï¼Œé‡‘è‰²é˜³å…‰æ´’åœ¨é«˜æ¥¼å¤§å¦ä¸Šï¼Œç»ç’ƒå¹•å¢™åå°„æ¸©æš–å…‰çº¿ï¼Œå†™å®æ‘„å½±é£æ ¼ï¼Œè¿œæ™¯æ‹æ‘„ï¼Œç”µå½±çº§æ„å›¾ï¼Œä¸“ä¸šæ‘„å½±ï¼Œé«˜è´¨é‡ï¼Œ4Kåˆ†è¾¨ç‡"

#### è·å–é£æ ¼æŒ‡å—
```json
{
  "method": "prompts/get",
  "params": {
    "name": "prompt-guide-styles"
  }
}
```

#### è·å–ç‰¹å®šé£æ ¼ç¤ºä¾‹
```json
{
  "method": "prompts/get",
  "params": {
    "name": "style-examples-watercolor"
  }
}
```

### æœåŠ¡ç›‘æ§ç¤ºä¾‹

#### æ£€æŸ¥æœåŠ¡çŠ¶æ€
```json
{
  "method": "tools/call",
  "params": {
    "name": "get_service_status"
  }
}
```

**è¿”å›ç¤ºä¾‹ï¼š**
```json
{
  "service_status": {
    "isTestMode": false,
    "hasApiKey": true,
    "concurrencyStatus": {
      "activeRequests": 1,
      "maxConcurrent": 2,
      "queueLength": 0
    }
  },
  "image_storage": {
    "totalImages": 156,
    "totalSize": "2.3GB",
    "modelDistribution": {
      "wanx2.1-t2i-plus": 89,
      "wanx2.1-t2i-turbo": 67
    }
  }
}
```

#### æœç´¢å†å²å›¾ç‰‡
```json
{
  "method": "tools/call",
  "params": {
    "name": "search_images",
    "arguments": {
      "query": "çŒ«å’ª"
    }
  }
}
```

## ğŸ¯ æœ€ä½³å®è·µ

### æç¤ºè¯ä¼˜åŒ–æŠ€å·§

#### 1. ç»“æ„åŒ–æè¿°
```
âœ… å¥½çš„æç¤ºè¯:
"25å²äºšæ´²å¥³æ€§ï¼Œé•¿å‘ï¼Œå¾®ç¬‘ï¼Œç©¿ç™½è‰²è¿è¡£è£™ï¼Œç«™åœ¨æ¨±èŠ±æ ‘ä¸‹ï¼Œæ˜¥æ—¥é˜³å…‰ï¼Œæ—¥ç³»æ‘„å½±é£æ ¼ï¼Œæµ…æ™¯æ·±ï¼Œä¸“ä¸šæ‘„å½±ï¼Œé«˜è´¨é‡"

âŒ é¿å…çš„æç¤ºè¯:
"å¥½çœ‹çš„å¥³å­©"
```

#### 2. å…·ä½“è€ŒéæŠ½è±¡
```
âœ… å…·ä½“æè¿°:
"é‡‘è‰²å¤•é˜³ï¼Œæ¸©æš–å…‰çº¿ï¼Œæ©˜çº¢è‰²å¤©ç©º"

âŒ æŠ½è±¡æè¿°:  
"ç¾ä¸½çš„å¤•é˜³"
```

#### 3. è´Ÿå‘æç¤ºè¯çš„ä½¿ç”¨
å¸¸ç”¨è´Ÿå‘æç¤ºè¯ï¼š
- `æ¨¡ç³Š, ä½è´¨é‡, å˜å½¢, å¤šä½™çš„æ‰‹æŒ‡, é”™è¯¯çš„è§£å‰–ç»“æ„`
- `è¿‡åº¦æ›å…‰, æ¬ æ›å…‰, å™ªç‚¹, å¤±çœŸ`
- `æ°´å°, æ–‡å­—, æ ‡å¿—, ç­¾å`

#### 4. è´¨é‡å¢å¼ºå…³é”®è¯
å¿…å¤‡è´¨é‡è¯ï¼š
- `é«˜è´¨é‡, 4K, 8K, ä¸“ä¸šæ‘„å½±, ç²¾ç»†ç»†èŠ‚`
- `é”åˆ©æ¸…æ™°, ç”µå½±çº§, å•†ä¸šæ‘„å½±, å¤§å¸ˆä½œå“`
- `ä¸“ä¸šæ‰“å…‰, HDR, åæœŸå¤„ç†`

### å‚æ•°è°ƒä¼˜å»ºè®®

#### æ¨¡å‹é€‰æ‹©ç­–ç•¥
```python
# å¿«é€Ÿè¿­ä»£å’Œæµ‹è¯•
model = "wanx2.1-t2i-turbo"

# é«˜è´¨é‡æœ€ç»ˆè¾“å‡º
model = "wanx2.1-t2i-plus" 

# æˆæœ¬æ§åˆ¶
model = "wanx2.0-t2i-turbo"
```

#### å°ºå¯¸é€‰æ‹©æŒ‡å—
```python
# ç¤¾äº¤åª’ä½“å¤´åƒ
size = "1024*1024"

# æ¨ªå±å£çº¸/æ¨ªå¹…
size = "1024*576" 

# æ‰‹æœºå£çº¸/ç«–å±å†…å®¹
size = "576*1024"

# å°åˆ·å“/é«˜åˆ†è¾¨ç‡éœ€æ±‚
size = "1440*1440"
```

#### ç§å­å€¼çš„è‰ºæœ¯
```python
# ä¿æŒä¸€è‡´æ€§ - ç›¸åŒç§å­ç”Ÿæˆç›¸ä¼¼é£æ ¼
seed = 12345

# æ¢ç´¢å˜åŒ– - ä¸åŒç§å­æ¢ç´¢å¯èƒ½æ€§
seed = random.randint(1, 1000000)

# ç³»åˆ—åˆ›ä½œ - é€’å¢ç§å­ä¿æŒé£æ ¼ä¸€è‡´æ€§
for i in range(10):
    seed = base_seed + i
```

### é«˜çº§æŠ€å·§

#### 1. æç¤ºè¯åˆ†å±‚ç»“æ„
```
ä¸»ä½“å±‚: "25å²ä¸­å›½å¥³æ€§ï¼Œé»‘è‰²é•¿å‘ï¼Œæ¸©æŸ”ç¬‘å®¹"
åœºæ™¯å±‚: "ååœ¨å’–å•¡å…çª—è¾¹ï¼Œæ¸©æš–çš„ä¸‹åˆé˜³å…‰"
é£æ ¼å±‚: "æ—¥ç³»æ‘„å½±é£æ ¼ï¼Œèƒ¶ç‰‡è´¨æ„Ÿï¼Œæµ…æ™¯æ·±"
æŠ€æœ¯å±‚: "ä¸“ä¸šæ‘„å½±ï¼Œ85mmé•œå¤´ï¼Œf/1.4å…‰åœˆ"
è´¨é‡å±‚: "é«˜è´¨é‡ï¼Œ4Kåˆ†è¾¨ç‡ï¼Œç²¾ç»†ç»†èŠ‚"
```

#### 2. æƒ…æ„Ÿæ°›å›´è¥é€ 
```
æ¸©é¦¨: "æ¸©æš–å…‰çº¿ï¼ŒæŸ”å’Œè‰²è°ƒï¼Œèˆ’é€‚æ°›å›´"
ç¥ç§˜: "æ˜æš—å…‰çº¿ï¼Œå¯¹æ¯”å¼ºçƒˆï¼Œæˆå‰§æ€§"
æµªæ¼«: "é‡‘è‰²æ—¶åˆ»ï¼ŒæŸ”ç„¦æ•ˆæœï¼Œæ¢¦å¹»å…‰æ™•"
åŠ›é‡: "å¼ºçƒˆå¯¹æ¯”ï¼Œé”åˆ©çº¿æ¡ï¼ŒåŠ¨æ€æ„å›¾"
```

#### 3. é£æ ¼èåˆæŠ€å·§
```
"3Då¡é€šé£æ ¼ + æ—¥ç³»æ‘„å½±ç¾å­¦"
"æ°´å½©ç”»æ•ˆæœ + ç°ä»£éƒ½å¸‚åœºæ™¯"  
"å›½é£æ°´å¢¨ + ç§‘å¹»å…ƒç´ "
"å†™å®æ‘„å½± + æ¢¦å¹»è‰²å½©"
```

### æ•…éšœæ’é™¤æŒ‡å—

#### å¸¸è§é—®é¢˜è§£å†³

**Q: ç”Ÿæˆçš„å›¾åƒä¸æè¿°ä¸ç¬¦**
A: 
- æ£€æŸ¥æç¤ºè¯æ˜¯å¦è¶³å¤Ÿå…·ä½“
- å°è¯•æ·»åŠ æ›´å¤šç»†èŠ‚æè¿°
- ä½¿ç”¨è´Ÿå‘æç¤ºè¯æ’é™¤ä¸éœ€è¦çš„å…ƒç´ 
- è°ƒæ•´æ¨¡å‹é€‰æ‹©

**Q: å›¾åƒè´¨é‡ä¸ç†æƒ³**
A:
- ä½¿ç”¨ `wanx2.1-t2i-plus` æ¨¡å‹
- æ·»åŠ è´¨é‡å¢å¼ºå…³é”®è¯
- æ£€æŸ¥å›¾åƒå°ºå¯¸è®¾ç½®
- ä¼˜åŒ–æç¤ºè¯ç»“æ„

**Q: ä»»åŠ¡ç”Ÿæˆå¤±è´¥**
A:
- æ£€æŸ¥APIå¯†é’¥é…ç½®
- ç¡®è®¤æç¤ºè¯å†…å®¹åˆè§„
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—é”™è¯¯ä¿¡æ¯
- é‡è¯•æˆ–è°ƒæ•´å‚æ•°

**Q: æœåŠ¡å™¨å“åº”æ…¢**
A:
- æ£€æŸ¥å¹¶å‘è¯·æ±‚æ•°é‡
- ç­‰å¾…å½“å‰ä»»åŠ¡å®Œæˆ
- ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹ `turbo` ç‰ˆæœ¬
- å‡å°‘ç”Ÿæˆå›¾ç‰‡æ•°é‡

#### æµ‹è¯•æ¨¡å¼ä½¿ç”¨
æ— APIå¯†é’¥æ—¶çš„åŠŸèƒ½æµ‹è¯•ï¼š
```bash
# å¯åŠ¨æµ‹è¯•æ¨¡å¼
npm test

# æµ‹è¯•æç¤ºè¯ä¼˜åŒ–
# æµ‹è¯•é£æ ¼æŒ‡å—è·å–
# æµ‹è¯•æœåŠ¡çŠ¶æ€æŸ¥è¯¢
# æµ‹è¯•å·¥å…·åˆ—è¡¨
```

## ğŸš€ å¼€å‘ä¸æ‰©å±•

### é¡¹ç›®æ¶æ„

```
src/
â”œâ”€â”€ index.ts              # ä¸»æœåŠ¡å™¨ - MCPåè®®å¤„ç†
â”œâ”€â”€ config.ts             # é…ç½®ç®¡ç† - ç¯å¢ƒå˜é‡éªŒè¯
â”œâ”€â”€ logger.ts             # æ—¥å¿—ç³»ç»Ÿ - åˆ†çº§æ—¥å¿—è®°å½•
â”œâ”€â”€ errors.ts             # é”™è¯¯å¤„ç† - è‡ªå®šä¹‰é”™è¯¯ç±»å‹
â”œâ”€â”€ concurrency.ts        # å¹¶å‘æ§åˆ¶ - è¯·æ±‚é˜Ÿåˆ—ç®¡ç†
â”œâ”€â”€ image-storage.ts      # å›¾ç‰‡å­˜å‚¨ - æœ¬åœ°å­˜å‚¨ç®¡ç†
â””â”€â”€ tongyi-service.ts     # é€šä¹‰æœåŠ¡ - APIå°è£…
```

### æ¨¡å—è¯´æ˜

#### æ ¸å¿ƒæ¨¡å—
- **index.ts**: MCPæœåŠ¡å™¨ä¸»å…¥å£ï¼Œå¤„ç†å·¥å…·è°ƒç”¨å’Œæç¤ºè¯è¯·æ±‚
- **config.ts**: é…ç½®ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒå˜é‡éªŒè¯å’Œæµ‹è¯•æ¨¡å¼
- **tongyi-service.ts**: é€šä¹‰ä¸‡ç›¸APIå°è£…ï¼Œæ”¯æŒå¼‚æ­¥ä»»åŠ¡å¤„ç†

#### æ”¯æŒæ¨¡å—  
- **logger.ts**: ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿï¼Œæ”¯æŒæ€§èƒ½ç›‘æ§
- **errors.ts**: ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼ŒåŒ…å«é‡è¯•æœºåˆ¶
- **concurrency.ts**: å¹¶å‘æ§åˆ¶ï¼Œé˜²æ­¢APIé™åˆ¶
- **image-storage.ts**: å›¾ç‰‡å­˜å‚¨ç®¡ç†ï¼Œæ”¯æŒå…ƒæ•°æ®å’Œæ¸…ç†

### æ‰©å±•å¼€å‘

#### æ·»åŠ æ–°å·¥å…·
```typescript
// åœ¨ index.ts ä¸­æ·»åŠ æ–°å·¥å…·
const tools = [
  // ç°æœ‰å·¥å…·...
  {
    name: "your_new_tool",
    description: "æ‚¨çš„æ–°å·¥å…·æè¿°",
    inputSchema: {
      type: "object",
      properties: {
        // å‚æ•°å®šä¹‰
      }
    }
  }
];

// åœ¨å·¥å…·è°ƒç”¨å¤„ç†ä¸­æ·»åŠ é€»è¾‘
if (name === "your_new_tool") {
  // å¤„ç†é€»è¾‘
}
```

#### æ·»åŠ æ–°æç¤ºè¯æ¨¡æ¿
```typescript
// åœ¨ prompts æ•°ç»„ä¸­æ·»åŠ 
{
  name: "your-prompt-template",
  description: "æ‚¨çš„æç¤ºè¯æ¨¡æ¿",
  arguments: [
    {
      name: "param",
      description: "å‚æ•°æè¿°",
      required: true
    }
  ]
}
```

#### æ·»åŠ æ–°é…ç½®é€‰é¡¹
```typescript
// åœ¨ config.ts ä¸­æ‰©å±•é…ç½®
const ConfigSchema = z.object({
  // ç°æœ‰é…ç½®...
  yourNewOption: z.string().default("default_value")
});
```

### æ€§èƒ½ä¼˜åŒ–

#### å¹¶å‘æ§åˆ¶è°ƒä¼˜
```typescript
// æ ¹æ®APIé™åˆ¶è°ƒæ•´å¹¶å‘æ•°
const MAX_CONCURRENT = process.env.MAX_CONCURRENT || 2;

// è°ƒæ•´é˜Ÿåˆ—è¶…æ—¶æ—¶é—´  
const QUEUE_TIMEOUT = process.env.QUEUE_TIMEOUT || 300000;
```

#### å­˜å‚¨ä¼˜åŒ–
```typescript
// è°ƒæ•´æ¸…ç†ç­–ç•¥
const CLEANUP_INTERVAL = 24 * 60 * 60 * 1000; // 24å°æ—¶
const RETENTION_DAYS = 7; // ä¿ç•™7å¤©

// æ·»åŠ å‹ç¼©é€‰é¡¹
const ENABLE_COMPRESSION = true;
```

#### æ—¥å¿—ä¼˜åŒ–
```typescript
// ç”Ÿäº§ç¯å¢ƒå‡å°‘æ—¥å¿—çº§åˆ«
const LOG_LEVEL = process.env.NODE_ENV === 'production' ? 'INFO' : 'DEBUG';

// æ·»åŠ æ—¥å¿—è½®è½¬
const LOG_ROTATION = {
  maxFiles: 5,
  maxSize: '10m'
};
```

### éƒ¨ç½²å»ºè®®

#### Docker éƒ¨ç½²
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY dist ./dist
EXPOSE 3000
CMD ["npm", "start"]
```

#### ç¯å¢ƒé…ç½®
```bash
# ç”Ÿäº§ç¯å¢ƒ
NODE_ENV=production
LOG_LEVEL=INFO
MAX_CONCURRENT_REQUESTS=3
IMAGE_RETENTION_DAYS=30

# å¼€å‘ç¯å¢ƒ  
NODE_ENV=development
LOG_LEVEL=DEBUG
MAX_CONCURRENT_REQUESTS=1
```

#### ç›‘æ§é›†æˆ
```typescript
// æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹
app.get('/health', (req, res) => {
  res.json({
    status: 'healthy',
    uptime: process.uptime(),
    memory: process.memoryUsage()
  });
});

// æ·»åŠ æŒ‡æ ‡æ”¶é›†
const metrics = {
  requestCount: 0,
  errorCount: 0,
  avgResponseTime: 0
};
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### è´¡çŒ®æ–¹å¼

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼

#### æŠ¥å‘Šé—®é¢˜
- ä½¿ç”¨ [GitHub Issues](https://github.com/jesxion/tongyi-wanx-mcp/issues) æŠ¥å‘Šbug
- æä¾›è¯¦ç»†çš„é‡ç°æ­¥éª¤å’Œç¯å¢ƒä¿¡æ¯
- åŒ…å«ç›¸å…³çš„æ—¥å¿—è¾“å‡º

#### åŠŸèƒ½è¯·æ±‚
- é€šè¿‡ Issues æå‡ºæ–°åŠŸèƒ½å»ºè®®
- è¯¦ç»†æè¿°åŠŸèƒ½éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯
- è€ƒè™‘å‘åå…¼å®¹æ€§

#### ä»£ç è´¡çŒ®
1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/jesxion/tongyi-wanx-mcp.git
cd tongyi-wanx-mcp

# 2. å®‰è£…ä¾èµ–
npm install

# 3. åˆ›å»ºç¯å¢ƒé…ç½®
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶æ·»åŠ æ‚¨çš„APIå¯†é’¥

# 4. å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev
```

### ä»£ç è§„èŒƒ

#### TypeScript è§„èŒƒ
- ä½¿ç”¨ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- ä¸ºæ‰€æœ‰å…¬å…±æ¥å£æä¾›ç±»å‹å®šä¹‰
- é¿å…ä½¿ç”¨ `any` ç±»å‹

#### ä»£ç é£æ ¼
- ä½¿ç”¨ 2 ç©ºæ ¼ç¼©è¿›
- ä½¿ç”¨åˆ†å·ç»“å°¾
- å‡½æ•°å’Œå˜é‡ä½¿ç”¨ camelCase
- å¸¸é‡ä½¿ç”¨ UPPER_SNAKE_CASE

#### æäº¤ä¿¡æ¯è§„èŒƒ
```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ›´æ–°æ–‡æ¡£
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„ä»£ç 
test: æ·»åŠ æµ‹è¯•
chore: æ„å»ºå·¥å…·æˆ–ä¾èµ–æ›´æ–°
```

### æµ‹è¯•æŒ‡å—

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•ï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰
npm run test:watch

# æ„å»ºæ£€æŸ¥
npm run build
```

### ç‰ˆæœ¬å‘å¸ƒ

æˆ‘ä»¬éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/) è§„èŒƒï¼š
- **MAJOR**: ä¸å…¼å®¹çš„APIå˜æ›´
- **MINOR**: å‘åå…¼å®¹çš„åŠŸèƒ½æ·»åŠ 
- **PATCH**: å‘åå…¼å®¹çš„é—®é¢˜ä¿®å¤

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [é˜¿é‡Œäº‘é€šä¹‰ä¸‡ç›¸](https://tongyi.aliyun.com/) - æä¾›å¼ºå¤§çš„AIå›¾åƒç”ŸæˆæœåŠ¡
- [Model Context Protocol](https://modelcontextprotocol.io/) - æä¾›æ ‡å‡†åŒ–çš„AIæœåŠ¡åè®®
- [TypeScript](https://www.typescriptlang.org/) - æä¾›ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
- [Zod](https://zod.dev/) - æä¾›è¿è¡Œæ—¶ç±»å‹éªŒè¯

## ğŸ“ è”ç³»æ–¹å¼

- **ä½œè€…**: Jesxion
- **é‚®ç®±**: jesxion@gmail.com
- **GitHub**: [@jesxion](https://github.com/jesxion)
- **é¡¹ç›®ä¸»é¡µ**: [tongyi-wanx-mcp](https://github.com/jesxion/tongyi-wanx-mcp)

## ğŸ”— ç›¸å…³é“¾æ¥

- [é€šä¹‰ä¸‡ç›¸å®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/zh/dashscope/developer-reference/api-details-9)
- [MCP åè®®è§„èŒƒ](https://modelcontextprotocol.io/docs)
- [é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°](https://bailian.console.aliyun.com/)
- [é¡¹ç›®ä¼˜åŒ–æ–‡æ¡£](OPTIMIZATION.md)

## ğŸ“ˆ é¡¹ç›®çŠ¶æ€

![GitHub stars](https://img.shields.io/github/stars/jesxion/tongyi-wanx-mcp?style=social)
![GitHub forks](https://img.shields.io/github/forks/jesxion/tongyi-wanx-mcp?style=social)
![GitHub issues](https://img.shields.io/github/issues/jesxion/tongyi-wanx-mcp)
![GitHub license](https://img.shields.io/github/license/jesxion/tongyi-wanx-mcp)

---

**ğŸ¨ è®©AIå›¾åƒç”Ÿæˆæ›´ç®€å•ã€æ›´ä¸“ä¸šã€æ›´å¯é ï¼**

*é€šè¿‡æ™ºèƒ½æç¤ºè¯ç³»ç»Ÿå’Œä¼ä¸šçº§æ¶æ„ï¼Œä¸ºå¼€å‘è€…æä¾›æœ€ä½³çš„AIå›¾åƒç”Ÿæˆä½“éªŒã€‚*
